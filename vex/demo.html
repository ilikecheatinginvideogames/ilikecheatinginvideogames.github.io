<!DOCTYPE html>
<html>

<head>
    <title>Login Demo</title>
</head>

<body>
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <form onsubmit="return submitRegistration()">
        <input type="email" id="email" placeholder="me@example.com">
        <input type="text" id="username" placeholder="username">
        <input type="password" id="password" placeholder="password">
        <div class="g-recaptcha" data-callback="settoken" data-sitekey="6LcFhaYZAAAAABgB8hwJjUFVJRhcSQ4PNJAkXmh_"></div>
        <br>
        <button>Register</button>
    </form>
    <script>
        window.token = null;
        window.settoken = async function (_token) {
            token = _token;
        };
        window.submitRegistration = function() {
         var req = new XMLHttpRequest();
            req.open("POST", "https://vex-api.herokuapp.com/register", true);
            req.setRequestHeader("Content-Type", "application/json");
            req.onload = function() {
                if(this.readyState != 4)
                    return;
                console.log(this.response);
            };
            req.send(JSON.stringify({
                username: document.querySelector("#username").value,
                email: document.querySelector("#email").value,
                password: document.querySelector("#password").value,
                recaptcha: window.token
            }));   
						return false;
        };
    </script>
</body>

</html>
