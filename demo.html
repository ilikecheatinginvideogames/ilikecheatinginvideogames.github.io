<!DOCTYPE html>
<html>

<head>
    <title>Login Demo</title>
</head>

<body>
    <script src="https://www.google.com/recaptcha/api.js"></script>
    <form>
        <input type="email" id="email" placeholder="me@example.com">
        <input type="text" id="username" placeholder="username">
        <input type="password" id="password" placeholder="password">
        <button class="g-recaptcha" data-sitekey="6Lc1rKUZAAAAACC7HDZClt_rDN1csZDjCqDWBnHn" data-callback='onSubmit' data-action='submit'>Submit</button>
    </form>
    <script>
        window.onSubmit = function(token) {
            let response = await fetch("https://vex-api.herokuapp.com/register", {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json;charset=utf-8'
                },
                body: JSON.stringify({
                    username: document.querySelector("#username").value,
                    email: document.querySelector("#email").value,
                    password: document.querySelector("#password").value,
                    recaptchaToken: token
                })
            });
            let result = await response.json();
            console.log(result);
        }
    </script>
</body>

</html>